
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Survey Analysis &#8212; From Excel to Pandas</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Linear Programming (Optimization)" href="08.03_Linear_optimization.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">From Excel to Pandas</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to the tutorial “from-Excel-to-Pandas” for data analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started.html">
   Install Locally
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Loading Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01.01%20-%20loading%20files.html">
   Loading Data Files (CSV or XLSX)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.02%20-%20loading%20data%20from%20HTML.html">
   Reading Data from Web Sites
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.03_loading_data_from_API.html">
   Reading Data from External API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Adding Columns
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="02.01_Adding_New_Columns.html">
   Adding New Columns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02.02_date_functions.html">
   Date Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02.08_group_values.html">
   Group numeric values into categories (bins)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Table Aggregation and Reshaping
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="03.01_pivot_tables.html">
   Creating a Pivot Table
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Table Enrichment with Merge
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="03.03_merge.html">
   Merge/Join Tables (VLOOKUP)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03.04_concat_tables.html">
   Union / Concat Tables
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Industries Use Cases
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="08.01_Logistics_analysis.html">
   Logistics Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08.02_Currency_analysis.html">
   Currency Rate Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08.03_Linear_optimization.html">
   Linear Programming (Optimization)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Survey Analysis
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/08.04_Survey_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/aiola-lab/from-excel-to-pandas/master?urlpath=lab/tree/notebooks/08.04_Survey_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#survery-overview">
   Survery Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cliping-outliers">
   Cliping outliers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#map-of-responders">
   Map of responders
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#personality-score">
   Personality Score
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mini-ipip-test-questions">
   Mini-IPIP test questions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personality-trait-visualization">
     Personality Trait Visualization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-groups">
   Random Groups
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#research-questions">
   Research questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-reliability-with-cronbach-s-alpha">
   Testing Reliability with Cronbach’s
   <span class="math notranslate nohighlight">
    \(\alpha\)
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculate-the-research-variables">
     Calculate the research variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#anova">
   Anova
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#another-way-to-calculate-anova-one-way">
     Another way to calculate Anova One Way
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphs-of-all-questions">
   Graphs of all questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#spss-files">
   SPSS Files
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Survey Analysis</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#survery-overview">
   Survery Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cliping-outliers">
   Cliping outliers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#map-of-responders">
   Map of responders
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#personality-score">
   Personality Score
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mini-ipip-test-questions">
   Mini-IPIP test questions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personality-trait-visualization">
     Personality Trait Visualization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-groups">
   Random Groups
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#research-questions">
   Research questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-reliability-with-cronbach-s-alpha">
   Testing Reliability with Cronbach’s
   <span class="math notranslate nohighlight">
    \(\alpha\)
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculate-the-research-variables">
     Calculate the research variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#anova">
   Anova
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#another-way-to-calculate-anova-one-way">
     Another way to calculate Anova One Way
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphs-of-all-questions">
   Graphs of all questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#spss-files">
   SPSS Files
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="survey-analysis">
<h1>Survey Analysis<a class="headerlink" href="#survey-analysis" title="Permalink to this headline">¶</a></h1>
<p>We often want to survey people on their views or reactions to possible events (design or promotion, for example). There are many survey tools that are good in designing the survey, presenting it on various forms, such as web or mobile, distributing it and collecting the responses. However, when it comes to analyzing the responses, you are left with fewer options, and most of them are out-dated (SPSS, for example).</p>
<p>In this notebook, we will explore how to analyze survey’s responses, including statistical tests for reliability and research hypothesis.</p>
<p>We will start with loading the CSV files that we exported from the survey system (Qualtrics, in this example).</p>
<p><a class="reference external" href="https://studiolab.sagemaker.aws/import/github/aiola-lab/from-excel-to-pandas/blob/master/notebooks/08.04_Survey_analysis.ipynb"><img alt="Open In Studio Lab" src="https://studiolab.sagemaker.aws/studiolab.svg" /></a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">survey_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/survey_results.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="survery-overview">
<h2>Survery Overview<a class="headerlink" href="#survery-overview" title="Permalink to this headline">¶</a></h2>
<p>We can explore the number of questions and answers with <em>info</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">survey_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 97 entries, 0 to 96
Data columns (total 65 columns):
 #   Column                 Non-Null Count  Dtype 
---  ------                 --------------  ----- 
 0   StartDate              97 non-null     object
 1   EndDate                97 non-null     object
 2   Status                 97 non-null     object
 3   IPAddress              97 non-null     object
 4   Progress               97 non-null     object
 5   Duration (in seconds)  97 non-null     object
 6   Finished               97 non-null     object
 7   RecordedDate           97 non-null     object
 8   ResponseId             97 non-null     object
 9   RecipientLastName      1 non-null      object
 10  RecipientFirstName     1 non-null      object
 11  RecipientEmail         1 non-null      object
 12  ExternalReference      1 non-null      object
 13  LocationLatitude       97 non-null     object
 14  LocationLongitude      97 non-null     object
 15  DistributionChannel    97 non-null     object
 16  UserLanguage           97 non-null     object
 17  Q_RecaptchaScore       95 non-null     object
 18  E1                     97 non-null     object
 19  A2                     97 non-null     object
 20  C3                     97 non-null     object
 21  N4                     97 non-null     object
 22  I5                     97 non-null     object
 23  E6R                    97 non-null     object
 24  A7R                    97 non-null     object
 25  C8R                    97 non-null     object
 26  N9R                    97 non-null     object
 27  I10R                   97 non-null     object
 28  E11                    97 non-null     object
 29  A12                    97 non-null     object
 30  C13                    97 non-null     object
 31  N14                    97 non-null     object
 32  I15R                   97 non-null     object
 33  E16R                   97 non-null     object
 34  A17R                   97 non-null     object
 35  C18R                   97 non-null     object
 36  N19R                   97 non-null     object
 37  I20R                   97 non-null     object
 38  Q71_First Click        50 non-null     object
 39  Q71_Last Click         50 non-null     object
 40  Q71_Page Submit        50 non-null     object
 41  Q71_Click Count        50 non-null     object
 42  Q73_First Click        48 non-null     object
 43  Q73_Last Click         48 non-null     object
 44  Q73_Page Submit        48 non-null     object
 45  Q73_Click Count        48 non-null     object
 46  Expectation1           97 non-null     object
 47  Expectation2           97 non-null     object
 48  Trust1                 97 non-null     object
 49  Trust2                 97 non-null     object
 50  Trust5                 97 non-null     object
 51  Trust6                 97 non-null     object
 52  Trust7                 97 non-null     object
 53  Trust8                 97 non-null     object
 54  Trust9                 97 non-null     object
 55  Expectation3           97 non-null     object
 56  Offering1              97 non-null     object
 57  Offering2              97 non-null     object
 58  Offering3              97 non-null     object
 59  Gender                 97 non-null     object
 60  Age                    97 non-null     object
 61  Education              97 non-null     object
 62  Region                 97 non-null     object
 63  Q53                    97 non-null     object
 64  Random ID              97 non-null     object
dtypes: object(65)
memory usage: 49.4+ KB
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cliping-outliers">
<h2>Cliping outliers<a class="headerlink" href="#cliping-outliers" title="Permalink to this headline">¶</a></h2>
<p>We want to remove outliers to avoid issues from people answering too quick or too slow. Let’s calculate the 0.05 and 0.95 percentiles of the data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">survey_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">:,[</span><span class="s1">&#39;Duration (in seconds)&#39;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Duration (in seconds)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.05</th>
      <td>87.25</td>
    </tr>
    <tr>
      <th>0.95</th>
      <td>1171.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>And now we can clip the data to be above 90 and below 1,100</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">valid_survey_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">survey_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">:,:]</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">duration</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;Duration (in seconds)&#39;</span><span class="p">]))</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;duration &gt; 90 and duration &lt; 1100&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">valid_survey_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>StartDate</th>
      <th>EndDate</th>
      <th>Status</th>
      <th>IPAddress</th>
      <th>Progress</th>
      <th>Duration (in seconds)</th>
      <th>Finished</th>
      <th>RecordedDate</th>
      <th>ResponseId</th>
      <th>RecipientLastName</th>
      <th>...</th>
      <th>Offering1</th>
      <th>Offering2</th>
      <th>Offering3</th>
      <th>Gender</th>
      <th>Age</th>
      <th>Education</th>
      <th>Region</th>
      <th>Q53</th>
      <th>Random ID</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>2/19/2021 3:28:19</td>
      <td>2/19/2021 3:30:28</td>
      <td>IP Address</td>
      <td>47.35.194.33</td>
      <td>100</td>
      <td>129</td>
      <td>True</td>
      <td>2/19/2021 3:30:29</td>
      <td>R_2WUYft76PXR2zBS</td>
      <td>NaN</td>
      <td>...</td>
      <td>3</td>
      <td>4</td>
      <td>2</td>
      <td>Female</td>
      <td>40-50</td>
      <td>Bachelor’s degree</td>
      <td>North America</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>58834</td>
      <td>129</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2/19/2021 3:28:16</td>
      <td>2/19/2021 3:30:36</td>
      <td>IP Address</td>
      <td>151.65.216.111</td>
      <td>100</td>
      <td>140</td>
      <td>True</td>
      <td>2/19/2021 3:30:37</td>
      <td>R_3eq8jucMfNqn5A4</td>
      <td>NaN</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>3</td>
      <td>Male</td>
      <td>18-28</td>
      <td>Bachelor’s degree</td>
      <td>Europe</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>21882</td>
      <td>140</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2/19/2021 3:29:12</td>
      <td>2/19/2021 3:31:01</td>
      <td>IP Address</td>
      <td>73.176.57.130</td>
      <td>100</td>
      <td>108</td>
      <td>True</td>
      <td>2/19/2021 3:31:01</td>
      <td>R_1jOnl4rE5r7qMcE</td>
      <td>NaN</td>
      <td>...</td>
      <td>Very likely\n7</td>
      <td>6</td>
      <td>6</td>
      <td>Male</td>
      <td>29-39</td>
      <td>Bachelor’s degree</td>
      <td>North America</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>59587</td>
      <td>108</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2/19/2021 3:29:18</td>
      <td>2/19/2021 3:31:07</td>
      <td>IP Address</td>
      <td>86.106.87.89</td>
      <td>100</td>
      <td>109</td>
      <td>True</td>
      <td>2/19/2021 3:31:07</td>
      <td>R_BxBBo8wdgckIP7j</td>
      <td>NaN</td>
      <td>...</td>
      <td>4</td>
      <td>5</td>
      <td>Very influential\n7</td>
      <td>Male</td>
      <td>29-39</td>
      <td>Bachelor’s degree</td>
      <td>South America</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>52402</td>
      <td>109</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2/19/2021 3:29:06</td>
      <td>2/19/2021 3:31:28</td>
      <td>IP Address</td>
      <td>27.57.12.252</td>
      <td>100</td>
      <td>142</td>
      <td>True</td>
      <td>2/19/2021 3:31:29</td>
      <td>R_2ea55lhudZuzX2J</td>
      <td>NaN</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>Male</td>
      <td>29-39</td>
      <td>Master Degree</td>
      <td>Asia</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>64888</td>
      <td>142</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>92</th>
      <td>2/19/2021 4:01:13</td>
      <td>2/19/2021 4:15:24</td>
      <td>IP Address</td>
      <td>117.199.129.182</td>
      <td>100</td>
      <td>850</td>
      <td>True</td>
      <td>2/19/2021 4:15:24</td>
      <td>R_3HXHwga41cOCWJ3</td>
      <td>NaN</td>
      <td>...</td>
      <td>6</td>
      <td>5</td>
      <td>Very influential\n7</td>
      <td>Female</td>
      <td>29-39</td>
      <td>Bachelor’s degree</td>
      <td>Asia</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>23065</td>
      <td>850</td>
    </tr>
    <tr>
      <th>93</th>
      <td>2/19/2021 4:05:50</td>
      <td>2/19/2021 4:15:54</td>
      <td>IP Address</td>
      <td>196.18.164.102</td>
      <td>100</td>
      <td>604</td>
      <td>True</td>
      <td>2/19/2021 4:15:55</td>
      <td>R_2sTpV27TMoq55Nj</td>
      <td>NaN</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>Female</td>
      <td>+62</td>
      <td>Bachelor’s degree</td>
      <td>North America</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>56488</td>
      <td>604</td>
    </tr>
    <tr>
      <th>94</th>
      <td>2/19/2021 4:14:37</td>
      <td>2/19/2021 4:17:39</td>
      <td>IP Address</td>
      <td>70.39.92.10</td>
      <td>100</td>
      <td>181</td>
      <td>True</td>
      <td>2/19/2021 4:17:39</td>
      <td>R_10IT3z1yGSWIddU</td>
      <td>NaN</td>
      <td>...</td>
      <td>Very likely\n7</td>
      <td>Very probable\n7</td>
      <td>Very influential\n7</td>
      <td>Female</td>
      <td>29-39</td>
      <td>Bachelor’s degree</td>
      <td>North America</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>10094</td>
      <td>181</td>
    </tr>
    <tr>
      <th>95</th>
      <td>2/19/2021 4:10:47</td>
      <td>2/19/2021 4:18:35</td>
      <td>IP Address</td>
      <td>182.65.119.175</td>
      <td>100</td>
      <td>467</td>
      <td>True</td>
      <td>2/19/2021 4:18:35</td>
      <td>R_2q9815sUara9kKO</td>
      <td>NaN</td>
      <td>...</td>
      <td>6</td>
      <td>Very probable\n7</td>
      <td>Very influential\n7</td>
      <td>Female</td>
      <td>29-39</td>
      <td>Master Degree</td>
      <td>Asia</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>88800</td>
      <td>467</td>
    </tr>
    <tr>
      <th>96</th>
      <td>2/19/2021 4:20:30</td>
      <td>2/19/2021 4:22:18</td>
      <td>IP Address</td>
      <td>117.213.34.183</td>
      <td>100</td>
      <td>108</td>
      <td>True</td>
      <td>2/19/2021 4:22:19</td>
      <td>R_2VpU6ciTRw7Kdyf</td>
      <td>NaN</td>
      <td>...</td>
      <td>5</td>
      <td>Very probable\n7</td>
      <td>6</td>
      <td>Male</td>
      <td>29-39</td>
      <td>Bachelor’s degree</td>
      <td>Asia</td>
      <td>IM_6m0pkPqaVoiPxY1</td>
      <td>68054</td>
      <td>108</td>
    </tr>
  </tbody>
</table>
<p>83 rows × 66 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">valid_survey_df</span>
    <span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> 
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> 
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Duration (in seconds) (between 0.05 and 0.95)&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_10_0.png" src="../_images/08.04_Survey_analysis_10_0.png" />
</div>
</div>
</div>
<div class="section" id="map-of-responders">
<h2>Map of responders<a class="headerlink" href="#map-of-responders" title="Permalink to this headline">¶</a></h2>
<p>Most of the survey tools are also reporting regarding the location of the responders with their location information. This survey also has this data in <em>LocationLongitude</em> and <em>Locationlatitude</em> columns. We can use the popular GeoPandas package to show them over the world map.</p>
<ul class="simple">
<li><p>Create from GeoPandas</p></li>
<li><p>a geo-location data frame</p></li>
<li><p>based on the survey table above</p></li>
<li><p>Use the geometry information to draw points based on</p></li>
<li><p><span class="math notranslate nohighlight">\(x\)</span> as location longitude, and</p></li>
<li><p><span class="math notranslate nohighlight">\(y\)</span> as location latitude</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install geopandas --quiet
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">gdf</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">geopandas</span>
    <span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
        <span class="n">valid_survey_df</span><span class="p">,</span> 
        <span class="n">geometry</span><span class="o">=</span><span class="n">geopandas</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span>
            <span class="n">valid_survey_df</span><span class="o">.</span><span class="n">LocationLongitude</span><span class="p">,</span> 
            <span class="n">valid_survey_df</span><span class="o">.</span><span class="n">LocationLatitude</span><span class="p">)</span>
        <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Create a map of the world based on the built-in map from GeoPandas</p></li>
<li><p>Plot the background map with</p></li>
<li><p>while background and</p></li>
<li><p>black lines</p></li>
<li><p>and the locations of the responders in red</p></li>
<li><p>Set the title of the map to “Survey Reponders Locations”</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">world</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">geopandas</span>
    <span class="o">.</span><span class="n">read_file</span><span class="p">(</span>
        <span class="n">geopandas</span>
        <span class="o">.</span><span class="n">datasets</span>
        <span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;naturalearth_lowres&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="p">(</span>
        <span class="n">world</span>
        <span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> 
            <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">),</span> 
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
    
<span class="p">)</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Survey Reponders Locations&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_15_0.png" src="../_images/08.04_Survey_analysis_15_0.png" />
</div>
</div>
</div>
<div class="section" id="personality-score">
<h2>Personality Score<a class="headerlink" href="#personality-score" title="Permalink to this headline">¶</a></h2>
<p>The first part of the survey was a personality score that we need to analyze to build the score of each responder. We can find the psychology test format in a previous reserach:</p>
</div>
<div class="section" id="mini-ipip-test-questions">
<h2>Mini-IPIP test questions<a class="headerlink" href="#mini-ipip-test-questions" title="Permalink to this headline">¶</a></h2>
<p>Based on: “The Mini-IPIP Scales: Tiny-Yet-Effective Measures of the Big Five Factors of Personality”</p>
<p>Appendix 20-Item Mini-IPIP</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Factor</p></th>
<th class="head"><p>Text</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>E</p></td>
<td><p>Am the life of the party.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>A</p></td>
<td><p>Sympathize with others’ feelings</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>C</p></td>
<td><p>Get chores done right away.</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>N</p></td>
<td><p>Have frequent mood swings.</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>I</p></td>
<td><p>Have a vivid imagination.</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>E</p></td>
<td><p>Don’t talk a lot. (R)</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>A</p></td>
<td><p>Am not interested in other people’s problems. (R)</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>C</p></td>
<td><p>Often forget to put things back in their proper place. (R)</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>N</p></td>
<td><p>Am relaxed most of the time. (R)</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>I</p></td>
<td><p>Am not interested in abstract ideas. (R)</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>E</p></td>
<td><p>Talk to a lot of different people at parties.</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>A</p></td>
<td><p>Feel others’ emotions.</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>C</p></td>
<td><p>Like order.</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>N</p></td>
<td><p>Get upset easily.</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>I</p></td>
<td><p>Have difficulty understanding abstract ideas. (R)</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>E</p></td>
<td><p>Keep in the background. (R)</p></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>A</p></td>
<td><p>Am not really interested in others. (R)</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>C</p></td>
<td><p>Make a mess of things. (R)</p></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>N</p></td>
<td><p>Seldom feel blue. (R)</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>I</p></td>
<td><p>Do not have a good imagination. (R)</p></td>
</tr>
</tbody>
</table>
<p>First, let’s get the questions that are written in the first line (index=0) of the table. We want the 20 questions from index 18 to index 38.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">survey_df</span>
    <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">18</span><span class="p">:</span><span class="mi">38</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>E1                              Am the life of the party.
A2                      Sympathize with others&#39; feelings.
C3                            Get chores done right away.
N4                             Have frequent mood swings.
I5                              Have a vivid imagination.
E6R                                     Don&#39;t talk a lot.
A7R         Am not interested in other people&#39;s problems.
C8R     Often forget to put things back in their prope...
N9R                          Am relaxed most of the time.
I10R                 Am not interested in abstract ideas.
E11         Talk to a lot of different people at parties.
A12                                Feel others&#39; emotions.
C13                                           Like order.
N14                                     Get upset easily.
I15R        Have difficulty understanding abstract ideas.
E16R                              Keep in the background.
A17R                  Am not really interested in others.
C18R                               Make a mess of things.
N19R                                    Seldom feel blue.
I20R                      Do not have a good imagination.
Name: 0, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Let’s check how the results look like in the table:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">survey_df</span><span class="o">.</span><span class="n">E1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     Am the life of the party.
1          Strongly Disagree\n1
2          Strongly Disagree\n1
3             Somewhat agree\n4
4             Somewhat agree\n4
                ...            
92            Somewhat agree\n4
93         Strongly Disagree\n1
94            Somewhat agree\n4
95         Strongly Disagree\n1
96            Strongly agree\n5
Name: E1, Length: 97, dtype: object
</pre></div>
</div>
</div>
</div>
<p>We see that we have five personality traits that we are measuring with these questions: E, A, C, N, I.</p>
<ul class="simple">
<li><p>Create a variable for each personality trait above</p></li>
<li><p>Convert each question to its relevant trait by taking the numertic score at the last character of the question as an Integer, and add it to the relevant trait score. Note that some of the scores are reversed and you need to add the reversed score (6 - score, for a 1-5 score as we have here)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">survey_ipip_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">valid_survey_df</span>
    <span class="c1"># Initial values to 0</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Update based on survy score</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">E1</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">A2</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">C3</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">N4</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">I</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">I5</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">E6R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">A7R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">C8R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">N9R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">I</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">I10R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">E11</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">A12</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">C13</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">N14</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">I</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">I15R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">E16R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">A17R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">C18R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">N19R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">I</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">I20R</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
    <span class="c1"># Calculate the average</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">E</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">E</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">A</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">C</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">N</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">I</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="personality-trait-visualization">
<h3>Personality Trait Visualization<a class="headerlink" href="#personality-trait-visualization" title="Permalink to this headline">¶</a></h3>
<p>We can show a quick histogram of one or two of the traits</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">survey_ipip_df</span>
    <span class="o">.</span><span class="n">E</span>
    <span class="o">.</span><span class="n">hist</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Extraversion&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_25_0.png" src="../_images/08.04_Survey_analysis_25_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">survey_ipip_df</span>
    <span class="o">.</span><span class="n">I</span>
    <span class="o">.</span><span class="n">hist</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Openness to experience&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_26_0.png" src="../_images/08.04_Survey_analysis_26_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="random-groups">
<h2>Random Groups<a class="headerlink" href="#random-groups" title="Permalink to this headline">¶</a></h2>
<p>Many tests are using split to random groups to check the effect of a treatment on one of the group, while using the other group as a control group (or any other similar test method). In the survey, the group will be visible with answers on some of the questions, while other groups will answer different questions. In this survey, there were two groups that were assigned randomaly question 71 or question 73.</p>
<ul class="simple">
<li><p>Create a new column in the table called <em>group</em></p></li>
<li><p>create the first condition to have an answer (not null) in Q71 column</p></li>
<li><p>create the second condition to have an answer in Q73 column</p></li>
<li><p>assign the group value to be <em>‘Group A’</em> for the first condition</p></li>
<li><p>assign the group value to be <em>‘Group B’</em> for the second condition</p></li>
<li><p>assign a default value <em>‘Unknown’</em> if none of the condition is mapped</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">survey_ipip_df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">survey_ipip_df</span><span class="p">[</span><span class="s1">&#39;Q71_Page Submit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">(),</span> 
        <span class="n">survey_ipip_df</span><span class="p">[</span><span class="s1">&#39;Q73_Page Submit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">(),</span> 
    <span class="p">],</span> 
    <span class="p">[</span>
        <span class="s1">&#39;Group A&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;Group B&#39;</span>
    <span class="p">],</span> 
    <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Unknown&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="research-questions">
<h2>Research questions<a class="headerlink" href="#research-questions" title="Permalink to this headline">¶</a></h2>
<p>The third part is the research questions part, where we want to test the impact of the treatment on the answers to these questions. From the list of columns in the table that we did in the beginning we see that these are starting with <em>‘Expectation1’</em>, and ends with <em>‘Offering3’</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">survey_questions</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">survey_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;Expectation1&#39;</span><span class="p">:</span><span class="s1">&#39;Offering3&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">survey_questions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expectation1          The chatbot&#39;s messages met my expectations.
Expectation2    The chatbot&#39;s messages corresponded to how I e...
Trust1                  The bike chatbot seemed to care about me.
Trust2                        The bike chatbot made me feel good.
Trust5             I believe the bike chatbot was honest with me.
Trust6          I believe the bike chatbot didn’t make false c...
Trust7                 I believe the bike chatbot is trustworthy.
Trust8                                  I trust the bike chatbot.
Trust9              The bike chatbot seemed adequate to my needs.
Expectation3             The chatbot&#39;s messages were appropriate.
Offering1       What is the likelihood that you would accept t...
Offering2       How probable is it that you would accept the c...
Offering3       How influential do you perceive the chatbot’s ...
Name: 0, dtype: object
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Convert all the values of these questions to numeric values based on the last characters ([-1:]) of the answer and set its type to be Interger</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numeric_survey_ipip_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">survey_ipip_df</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> 
        <span class="n">x</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Expectation&#39;</span><span class="p">)</span> 
        <span class="k">else</span> <span class="n">x</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> 
        <span class="n">x</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Trust&#39;</span><span class="p">)</span> 
        <span class="k">else</span> <span class="n">x</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> 
        <span class="n">x</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Offering&#39;</span><span class="p">)</span> 
        <span class="k">else</span> <span class="n">x</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="testing-reliability-with-cronbach-s-alpha">
<h2>Testing Reliability with Cronbach’s <span class="math notranslate nohighlight">\(\alpha\)</span><a class="headerlink" href="#testing-reliability-with-cronbach-s-alpha" title="Permalink to this headline">¶</a></h2>
<p>A common test to check the reliability of the answers is to test them using <a class="reference external" href="https://en.wikipedia.org/wiki/Cronbach%27s_alpha">Cronbach’s alpha</a> test. We expect that all the questions that are related to <em>Trust</em>, for example, will have a high correlation, and therefore a cronbach-alpha score that is higher than 0.7.</p>
<p>First, let’s install a python library with cronbach-alpha function in it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pingouin</span> <span class="o">--</span><span class="n">quiet</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pingouin</span> <span class="k">as</span> <span class="nn">pg</span>
</pre></div>
</div>
</div>
</div>
<p>Now, let’s take the set of questions for each variable (<em>Expectation</em>, <em>Trust</em>, and <em>Offering</em> in this survey) and calculate their score:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pg</span><span class="o">.</span><span class="n">cronbach_alpha</span><span class="p">(</span><span class="n">data</span><span class="o">=</span>
    <span class="n">numeric_survey_ipip_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span>
        <span class="p">[</span><span class="s1">&#39;Expectation1&#39;</span><span class="p">,</span><span class="s1">&#39;Expectation2&#39;</span><span class="p">,</span><span class="s1">&#39;Expectation3&#39;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.7635463917525775, array([0.659, 0.84 ]))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pg</span><span class="o">.</span><span class="n">cronbach_alpha</span><span class="p">(</span><span class="n">data</span><span class="o">=</span>
    <span class="n">numeric_survey_ipip_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span>
        <span class="p">[</span><span class="s1">&#39;Trust1&#39;</span><span class="p">,</span><span class="s1">&#39;Trust2&#39;</span><span class="p">,</span><span class="s1">&#39;Trust5&#39;</span><span class="p">,</span><span class="s1">&#39;Trust6&#39;</span><span class="p">,</span><span class="s1">&#39;Trust7&#39;</span><span class="p">,</span><span class="s1">&#39;Trust8&#39;</span><span class="p">,</span><span class="s1">&#39;Trust9&#39;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.7665523059220511, array([0.681, 0.836]))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pg</span><span class="o">.</span><span class="n">cronbach_alpha</span><span class="p">(</span><span class="n">data</span><span class="o">=</span>
    <span class="n">numeric_survey_ipip_df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span>
        <span class="p">[</span><span class="s1">&#39;Offering1&#39;</span><span class="p">,</span><span class="s1">&#39;Offering2&#39;</span><span class="p">,</span><span class="s1">&#39;Offering3&#39;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.7863454562366294, array([0.692, 0.855]))
</pre></div>
</div>
</div>
</div>
<div class="section" id="calculate-the-research-variables">
<h3>Calculate the research variables<a class="headerlink" href="#calculate-the-research-variables" title="Permalink to this headline">¶</a></h3>
<p>Now that we see that the reliability of the question is good enough (&gt;0.7), we can calculate the average score of each of these questions sets. We will use <em>eval</em> function to do it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summary_numeric_survey_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">numeric_survey_ipip_df</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;Expectation = (Expectation1 + Expectation2 + Expectation3) / 3&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;Offering = (Offering1 + Offering2 + Offering3) / 3&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;Trust = (Trust1 + Trust2 + Trust5 + Trust6 + Trust7 + Trust8 + Trust9) / 7&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">summary_numeric_survey_df</span>
    <span class="p">[[</span><span class="s1">&#39;Expectation&#39;</span><span class="p">,</span><span class="s1">&#39;Expectation1&#39;</span><span class="p">,</span><span class="s1">&#39;Expectation2&#39;</span><span class="p">,</span><span class="s1">&#39;Expectation3&#39;</span><span class="p">,</span><span class="s1">&#39;group&#39;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_43_0.png" src="../_images/08.04_Survey_analysis_43_0.png" />
</div>
</div>
<p>We can plot the correlation of any of the personality traits (first part of the survey), with the score to any of the research questions (third part), within the two different grups (second part)</p>
<ul class="simple">
<li><p>Create a grid of 3 by 2 to show the graphs of the research question * groups</p></li>
<li><p>For each one of the reserach questions and</p></li>
<li><p>for each of the groups</p></li>
<li><p>filter the table to include only the current group</p></li>
<li><p>Plot a regression plot (points, line and confidence area)</p></li>
<li><p><span class="math notranslate nohighlight">\(x\)</span> as E (personality)</p></li>
<li><p><span class="math notranslate nohighlight">\(y\)</span> as the research question</p></li>
<li><p>on the chart grid</p></li>
<li><p>Set the title of each graph the name of the group</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="c1">### PLOT BUILD</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;Expectation&#39;</span><span class="p">,</span><span class="s1">&#39;Trust&#39;</span><span class="p">,</span><span class="s1">&#39;Offering&#39;</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;Group A&#39;</span><span class="p">,</span> <span class="s1">&#39;Group B&#39;</span><span class="p">]):</span>
        <span class="n">sub_df</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;group == @group&#39;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="p">(</span>
            <span class="n">sns</span>
            <span class="o">.</span><span class="n">regplot</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">sub_df</span><span class="o">.</span><span class="n">E</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="n">sub_df</span><span class="p">[</span><span class="n">attribute</span><span class="p">],</span> 
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_45_0.png" src="../_images/08.04_Survey_analysis_45_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="anova">
<h2>Anova<a class="headerlink" href="#anova" title="Permalink to this headline">¶</a></h2>
<p>The last part of the analysis is the null hypothsis check that the groups are making a different impact on the relationship between the personality trait and the reserach questions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">import</span> <span class="n">ols</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;Trust ~ C(group) * E&#39;</span><span class="p">,</span> 
        <span class="n">data</span><span class="o">=</span><span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;Trust&#39;</span><span class="p">,</span><span class="s1">&#39;group&#39;</span><span class="p">]]</span>
        <span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_regress_exog</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>eval_env: 1
</pre></div>
</div>
<img alt="../_images/08.04_Survey_analysis_48_1.png" src="../_images/08.04_Survey_analysis_48_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Expectation&#39;</span><span class="p">,</span><span class="s1">&#39;Trust&#39;</span><span class="p">,</span><span class="s1">&#39;Offering&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s1"> ~ C(group) * E&#39;</span><span class="p">,</span> 
        <span class="n">data</span><span class="o">=</span><span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="n">attribute</span><span class="p">,</span><span class="s1">&#39;group&#39;</span><span class="p">]]</span>
        <span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
    <span class="n">anova_table</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">anova_lm</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">anova_table</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">summary_numeric_survey_df</span><span class="o">.</span><span class="n">anova</span><span class="p">(</span><span class="n">dv</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span> <span class="n">between</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expectation
</pre></div>
</div>
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>Expectation</td>   <th>  R-squared:         </th> <td>   0.045</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.009</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   1.240</td>
</tr>
<tr>
  <th>Date:</th>             <td>Sun, 22 May 2022</td> <th>  Prob (F-statistic):</th>  <td> 0.301</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>04:29:21</td>     <th>  Log-Likelihood:    </th> <td> -76.904</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>    83</td>      <th>  AIC:               </th> <td>   161.8</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>    79</td>      <th>  BIC:               </th> <td>   171.5</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
            <td></td>               <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>             <td>    3.5115</td> <td>    0.471</td> <td>    7.453</td> <td> 0.000</td> <td>    2.574</td> <td>    4.449</td>
</tr>
<tr>
  <th>C(group)[T.Group B]</th>   <td>    0.4466</td> <td>    0.619</td> <td>    0.721</td> <td> 0.473</td> <td>   -0.786</td> <td>    1.680</td>
</tr>
<tr>
  <th>E</th>                     <td>    0.2620</td> <td>    0.155</td> <td>    1.695</td> <td> 0.094</td> <td>   -0.046</td> <td>    0.570</td>
</tr>
<tr>
  <th>C(group)[T.Group B]:E</th> <td>   -0.1816</td> <td>    0.202</td> <td>   -0.897</td> <td> 0.372</td> <td>   -0.584</td> <td>    0.221</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>32.242</td> <th>  Durbin-Watson:     </th> <td>   2.149</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>  61.305</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-1.480</td> <th>  Prob(JB):          </th> <td>4.87e-14</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 5.995</td> <th>  Cond. No.          </th> <td>    41.4</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sum_sq</th>
      <th>df</th>
      <th>F</th>
      <th>PR(&gt;F)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>C(group)</th>
      <td>0.188292</td>
      <td>1.0</td>
      <td>0.479798</td>
      <td>0.490545</td>
    </tr>
    <tr>
      <th>E</th>
      <td>0.960168</td>
      <td>1.0</td>
      <td>2.446659</td>
      <td>0.121772</td>
    </tr>
    <tr>
      <th>C(group):E</th>
      <td>0.315844</td>
      <td>1.0</td>
      <td>0.804820</td>
      <td>0.372382</td>
    </tr>
    <tr>
      <th>Residual</th>
      <td>31.002798</td>
      <td>79.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.13/x64/lib/python3.7/site-packages/statsmodels/base/model.py:1873: ValueWarning: covariance of constraints does not have full rank. The number of constraints is 14, but rank is 10
  &#39;rank is %d&#39; % (J, J_), ValueWarning)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Source</th>
      <th>SS</th>
      <th>DF</th>
      <th>MS</th>
      <th>F</th>
      <th>p-unc</th>
      <th>np2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>group</td>
      <td>2.738</td>
      <td>1.0</td>
      <td>2.738</td>
      <td>10.734</td>
      <td>0.002</td>
      <td>0.154</td>
    </tr>
    <tr>
      <th>1</th>
      <td>E</td>
      <td>2069.063</td>
      <td>14.0</td>
      <td>147.790</td>
      <td>579.413</td>
      <td>0.000</td>
      <td>0.993</td>
    </tr>
    <tr>
      <th>2</th>
      <td>group * E</td>
      <td>35.160</td>
      <td>14.0</td>
      <td>2.511</td>
      <td>9.846</td>
      <td>0.000</td>
      <td>0.700</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Residual</td>
      <td>15.049</td>
      <td>59.0</td>
      <td>0.255</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Trust
</pre></div>
</div>
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>          <td>Trust</td>      <th>  R-squared:         </th> <td>   0.076</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.041</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   2.173</td>
</tr>
<tr>
  <th>Date:</th>             <td>Sun, 22 May 2022</td> <th>  Prob (F-statistic):</th>  <td>0.0978</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>04:29:21</td>     <th>  Log-Likelihood:    </th> <td> -61.619</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>    83</td>      <th>  AIC:               </th> <td>   131.2</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>    79</td>      <th>  BIC:               </th> <td>   140.9</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
            <td></td>               <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>             <td>    3.5102</td> <td>    0.392</td> <td>    8.956</td> <td> 0.000</td> <td>    2.730</td> <td>    4.290</td>
</tr>
<tr>
  <th>C(group)[T.Group B]</th>   <td>    0.0700</td> <td>    0.515</td> <td>    0.136</td> <td> 0.892</td> <td>   -0.956</td> <td>    1.096</td>
</tr>
<tr>
  <th>E</th>                     <td>    0.2309</td> <td>    0.129</td> <td>    1.796</td> <td> 0.076</td> <td>   -0.025</td> <td>    0.487</td>
</tr>
<tr>
  <th>C(group)[T.Group B]:E</th> <td>   -0.0562</td> <td>    0.168</td> <td>   -0.334</td> <td> 0.739</td> <td>   -0.391</td> <td>    0.279</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>34.337</td> <th>  Durbin-Watson:     </th> <td>   1.722</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>  75.187</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-1.487</td> <th>  Prob(JB):          </th> <td>4.71e-17</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 6.591</td> <th>  Cond. No.          </th> <td>    41.4</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sum_sq</th>
      <th>df</th>
      <th>F</th>
      <th>PR(&gt;F)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>C(group)</th>
      <td>0.198562</td>
      <td>1.0</td>
      <td>0.731283</td>
      <td>0.395054</td>
    </tr>
    <tr>
      <th>E</th>
      <td>1.546282</td>
      <td>1.0</td>
      <td>5.694801</td>
      <td>0.019408</td>
    </tr>
    <tr>
      <th>C(group):E</th>
      <td>0.030313</td>
      <td>1.0</td>
      <td>0.111641</td>
      <td>0.739169</td>
    </tr>
    <tr>
      <th>Residual</th>
      <td>21.450497</td>
      <td>79.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.13/x64/lib/python3.7/site-packages/statsmodels/base/model.py:1873: ValueWarning: covariance of constraints does not have full rank. The number of constraints is 14, but rank is 10
  &#39;rank is %d&#39; % (J, J_), ValueWarning)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Source</th>
      <th>SS</th>
      <th>DF</th>
      <th>MS</th>
      <th>F</th>
      <th>p-unc</th>
      <th>np2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>group</td>
      <td>2.673</td>
      <td>1.0</td>
      <td>2.673</td>
      <td>14.043</td>
      <td>0.0</td>
      <td>0.192</td>
    </tr>
    <tr>
      <th>1</th>
      <td>E</td>
      <td>1980.174</td>
      <td>14.0</td>
      <td>141.441</td>
      <td>743.184</td>
      <td>0.0</td>
      <td>0.994</td>
    </tr>
    <tr>
      <th>2</th>
      <td>group * E</td>
      <td>26.872</td>
      <td>14.0</td>
      <td>1.919</td>
      <td>10.085</td>
      <td>0.0</td>
      <td>0.705</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Residual</td>
      <td>11.229</td>
      <td>59.0</td>
      <td>0.190</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Offering
</pre></div>
</div>
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>        <td>Offering</td>     <th>  R-squared:         </th> <td>   0.111</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.077</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   3.291</td>
</tr>
<tr>
  <th>Date:</th>             <td>Sun, 22 May 2022</td> <th>  Prob (F-statistic):</th>  <td>0.0249</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>04:29:21</td>     <th>  Log-Likelihood:    </th> <td> -114.53</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>    83</td>      <th>  AIC:               </th> <td>   237.1</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>    79</td>      <th>  BIC:               </th> <td>   246.7</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
            <td></td>               <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>             <td>    4.5893</td> <td>    0.741</td> <td>    6.190</td> <td> 0.000</td> <td>    3.114</td> <td>    6.065</td>
</tr>
<tr>
  <th>C(group)[T.Group B]</th>   <td>   -0.6425</td> <td>    0.975</td> <td>   -0.659</td> <td> 0.512</td> <td>   -2.583</td> <td>    1.298</td>
</tr>
<tr>
  <th>E</th>                     <td>    0.3777</td> <td>    0.243</td> <td>    1.553</td> <td> 0.124</td> <td>   -0.106</td> <td>    0.862</td>
</tr>
<tr>
  <th>C(group)[T.Group B]:E</th> <td>    0.1288</td> <td>    0.318</td> <td>    0.404</td> <td> 0.687</td> <td>   -0.505</td> <td>    0.763</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>14.535</td> <th>  Durbin-Watson:     </th> <td>   1.891</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.001</td> <th>  Jarque-Bera (JB):  </th> <td>  16.718</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-0.898</td> <th>  Prob(JB):          </th> <td>0.000234</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.267</td> <th>  Cond. No.          </th> <td>    41.4</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sum_sq</th>
      <th>df</th>
      <th>F</th>
      <th>PR(&gt;F)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>C(group)</th>
      <td>1.381213</td>
      <td>1.0</td>
      <td>1.421506</td>
      <td>0.236725</td>
    </tr>
    <tr>
      <th>E</th>
      <td>8.083278</td>
      <td>1.0</td>
      <td>8.319086</td>
      <td>0.005054</td>
    </tr>
    <tr>
      <th>C(group):E</th>
      <td>0.158976</td>
      <td>1.0</td>
      <td>0.163614</td>
      <td>0.686944</td>
    </tr>
    <tr>
      <th>Residual</th>
      <td>76.760714</td>
      <td>79.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.13/x64/lib/python3.7/site-packages/statsmodels/base/model.py:1873: ValueWarning: covariance of constraints does not have full rank. The number of constraints is 14, but rank is 10
  &#39;rank is %d&#39; % (J, J_), ValueWarning)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Source</th>
      <th>SS</th>
      <th>DF</th>
      <th>MS</th>
      <th>F</th>
      <th>p-unc</th>
      <th>np2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>group</td>
      <td>9.509</td>
      <td>1.0</td>
      <td>9.509</td>
      <td>11.908</td>
      <td>0.001</td>
      <td>0.168</td>
    </tr>
    <tr>
      <th>1</th>
      <td>E</td>
      <td>3593.710</td>
      <td>14.0</td>
      <td>256.694</td>
      <td>321.460</td>
      <td>0.000</td>
      <td>0.987</td>
    </tr>
    <tr>
      <th>2</th>
      <td>group * E</td>
      <td>62.507</td>
      <td>14.0</td>
      <td>4.465</td>
      <td>5.591</td>
      <td>0.000</td>
      <td>0.570</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Residual</td>
      <td>47.113</td>
      <td>59.0</td>
      <td>0.799</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="section" id="another-way-to-calculate-anova-one-way">
<h3>Another way to calculate Anova One Way<a class="headerlink" href="#another-way-to-calculate-anova-one-way" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stats</span>

<span class="n">fvalue</span><span class="p">,</span> <span class="n">pvalue</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">stats</span>
    <span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span>
        <span class="n">summary_numeric_survey_df</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
        <span class="n">summary_numeric_survey_df</span><span class="p">[</span><span class="s1">&#39;Trust&#39;</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fvalue</span><span class="p">,</span> <span class="n">pvalue</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>147.41775587209213 1.3074590620296686e-24
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="graphs-of-all-questions">
<h2>Graphs of all questions<a class="headerlink" href="#graphs-of-all-questions" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">q_num</span><span class="p">,</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">survey_questions</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">group</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">summary_numeric_survey_df</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">unique</span><span class="p">())):</span>
        <span class="n">sub_df</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;group == @group&#39;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="p">(</span>
            <span class="n">sns</span>
            <span class="o">.</span><span class="n">regplot</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">sub_df</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span> 
                <span class="n">y</span><span class="o">=</span><span class="n">sub_df</span><span class="p">[</span><span class="n">q_num</span><span class="p">],</span> 
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;small&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08.04_Survey_analysis_53_0.png" src="../_images/08.04_Survey_analysis_53_0.png" />
<img alt="../_images/08.04_Survey_analysis_53_1.png" src="../_images/08.04_Survey_analysis_53_1.png" />
<img alt="../_images/08.04_Survey_analysis_53_2.png" src="../_images/08.04_Survey_analysis_53_2.png" />
<img alt="../_images/08.04_Survey_analysis_53_3.png" src="../_images/08.04_Survey_analysis_53_3.png" />
<img alt="../_images/08.04_Survey_analysis_53_4.png" src="../_images/08.04_Survey_analysis_53_4.png" />
<img alt="../_images/08.04_Survey_analysis_53_5.png" src="../_images/08.04_Survey_analysis_53_5.png" />
<img alt="../_images/08.04_Survey_analysis_53_6.png" src="../_images/08.04_Survey_analysis_53_6.png" />
<img alt="../_images/08.04_Survey_analysis_53_7.png" src="../_images/08.04_Survey_analysis_53_7.png" />
<img alt="../_images/08.04_Survey_analysis_53_8.png" src="../_images/08.04_Survey_analysis_53_8.png" />
<img alt="../_images/08.04_Survey_analysis_53_9.png" src="../_images/08.04_Survey_analysis_53_9.png" />
<img alt="../_images/08.04_Survey_analysis_53_10.png" src="../_images/08.04_Survey_analysis_53_10.png" />
<img alt="../_images/08.04_Survey_analysis_53_11.png" src="../_images/08.04_Survey_analysis_53_11.png" />
<img alt="../_images/08.04_Survey_analysis_53_12.png" src="../_images/08.04_Survey_analysis_53_12.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">spearmanr</span>
<span class="k">for</span> <span class="n">q_num</span><span class="p">,</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">survey_questions</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">stat</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">spearmanr</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;group == &quot;Group A&quot;&#39;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">41</span><span class="p">,:]</span>
            <span class="p">[</span><span class="n">q_num</span><span class="p">]</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">summary_numeric_survey_df</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;group == &quot;Group B&quot;&#39;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">41</span><span class="p">,:]</span>
            <span class="p">[</span><span class="n">q_num</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;stat=</span><span class="si">%.3f</span><span class="s1">, p=</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span><span class="n">q</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>stat=0.346, p=0.027 The chatbot&#39;s messages met my expectations.
stat=0.342, p=0.029 The chatbot&#39;s messages corresponded to how I expected it to communicate with me.
stat=0.197, p=0.216 The bike chatbot seemed to care about me.
stat=0.117, p=0.467 The bike chatbot made me feel good.
stat=0.036, p=0.823 I believe the bike chatbot was honest with me.
stat=0.068, p=0.675 I believe the bike chatbot didn’t make false claims.
stat=0.139, p=0.385 I believe the bike chatbot is trustworthy.
stat=0.119, p=0.459 I trust the bike chatbot.
stat=0.292, p=0.064 The bike chatbot seemed adequate to my needs.
stat=0.008, p=0.963 The chatbot&#39;s messages were appropriate.
stat=0.029, p=0.855 What is the likelihood that you would accept the chatbot’s offer to help find a bike?
stat=0.029, p=0.856 How probable is it that you would accept the chatbot’s offer to help find a bike?
stat=0.126, p=0.434 How influential do you perceive the chatbot’s offer to help you find a bike?
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="spss-files">
<h2>SPSS Files<a class="headerlink" href="#spss-files" title="Permalink to this headline">¶</a></h2>
<p>Pandas can also load SPSS files</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#pip install pyreadstat</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#spss_df = pd.read_spss()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#spss_df</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="08.03_Linear_optimization.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Linear Programming (Optimization)</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By The Aiola Team<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>